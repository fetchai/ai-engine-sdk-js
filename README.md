<div align="center">
  <h1>AI Engine SDK JS/TS</h1>
  <blockquote>A library to enable users to build custom AI Engine Applications</blockquote>

<a href="https://www.npmjs.com/package/@fetchai/ai-engine-sdk">
  <img src="https://badgen.net/npm/v/@fetchai/ai-engine-sdk?color=blue" alt="npm version">
</a>
<a href="https://github.com/fetchai/ai-engine-sdk-js">
  <img src="https://img.shields.io/github/last-commit/fetchai/ai-engine-sdk-js" alt="latest commit">
</a>
<a href="https://github.com/fetchai/ai-engine-sdk-js/actions">
  <img alt="Build Status" src="https://github.com/fetchai/ai-engine-sdk-js/workflows/Build/badge.svg?color=green" />
</a>
<a href="https://github.com/fetchai/ai-engine-sdk-js/actions">
  <img alt="Publish Status" src="https://github.com/fetchai/ai-engine-sdk-js/workflows/Publish/badge.svg?color=green" />
</a>

</div>

## ‚≠êÔ∏è Features

- Access to latest AI Engine features
- Simple and intuitive API
- Support for TypeScript and JavaScript
- Can run in the browser or via node

## üì¶ Getting Started

```bash
npm install @fetchai/ai-engine-sdk
```

### Using the Chat API

Before you start to integrate the AI Engine into your app, you might want to get familiar with [agent functions](https://fetch.ai/docs/guides/agents/intermediate/agent-functions).

#### Creating the AIEngine client object

To find out how to generate an <code>apiKey</code> check out the documentation regarding [Agentverse API keys](https://fetch.ai/docs/guides/apis/agent-service-creation-apis).

```javascript
import { AiEngine } from "@fetchai/ai-engine-sdk";

const aiEngine = new AiEngine(apiKey);
```

#### Querying the id of the function group where our to-be-used function(s) belong

```javascript
const functionGroups = await aiEngine.getFunctionGroups();
const functionGroupId = functionGroups.find((g) => g.name === "Fetch Verified");
```

If you would like to use the functions in your own **My Functions** function group instead then you can use this filter instead:

```javascript
const functionGroupId = functionGroups.find((g) => g.name === "My Functions");
```

#### Creating a session with the AI Engine using the <code>functionGroupId</code> fetched before

```javascript
const session = await aiEngine.createSession(functionGroupId);
```

#### Starting the conversation with an arbitrary objective

```javascript
await session.start("Find a holiday destination");
```

#### Querying new messages

You might want to query new messages regularly with a <code>setTimeout</code> or <code>setInterval</code> to check for new <code>Message</code> (Check out [examples/simple.ts](examples/simple.ts) for a complete example use case of the SDK):

```javascript
const messages = await session.getMessages();
```

#### Checking the type of the new message

There are 5 different types of messages which are generated by the AI Engine and the SDK implements methods for checking the type of the respective new <code>Message</code>:

- task selection message: <code>isTaskSelectionMessage</code> - this message is generated for example in the case when the AI engine recommends functions based on the initial objective or in the case when the AI Engine finds multiple options to provide as an input for a function.
- AI Engine message: <code>isAiEngineMessage</code> - this message type doesn't expect the user to reply to, this is for notifying the user about something
- confirmation message: <code>isConfirmationMessage</code> - when the AI Engine has managed to acquire all the inputs for the agent belonging to the to-be-executed function (= it has managed to build the context), it sends this type of message to the user
- agent message: <code>isAgentMessage</code> - this is a regular question that the user has to reply to with a string
- stop message: <code>isStopMessage</code> - this is the message which is sent when the session has stopped and the AI Engine doesn't wait for any replies from the user

#### Replying to the different type of messages

All message types (expect for the AI engine message and stop message) expects a response from the user and the SDK implements methods for sending reply in response to those different type of messages respectively.
The first argument of all these reply methods is the <code>Message</code> object to which we want to send back the response.
The SDK methods you can use to reply to:

- task selection message: <code>session.submitTaskSelection</code>
- agent message: <code>session.submitResponse</code>
- confirmation message: <code>session.submitConfirmation</code> or <code>session.rejectConfirmation</code> - depending on if the user wants to confirm or reject the context generated by the AI engine respectively

#### Deleting session with AI engine

After finishing the conversation with AI Engine you can delete the session like this:

```javascript
await session.delete();
```

If you would like to check out a complete example on how to integrate AI Engine into your app, feel free to checkout [examples/simple.ts](examples/simple.ts).

## ‚ú® Contributing

All contributions are welcome! Remember, contribution includes not only code, but any help with docs or issues raised by other developers. See our [contribution guidelines](https://github.com/fetchai/ai-engine-sdk-js/blob/main/CONTRIBUTING.md) for more details.

### ‚ùì Issues, Questions, and Discussions

We use [GitHub Issues](https://github.com/fetchai/ai-engine-sdk-js/issues) for tracking requests and bugs, and [GitHub Discussions](https://github.com/fetchai/ai-engine-sdk-js/discussions) for general questions and discussion.
